<!DOCTYPE html>
<html lang="{{ site.lang | default: 'en' }}">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% if page.title %}{{ page.title }} | {{ site.title }}{% else %}{{ site.title }}{% endif %}</title>
  <meta name="description" content="{{ page.description | default: site.description | strip_html | truncatewords: 50 }}">

  <!-- Open Graph -->
  <meta property="og:title" content="{% if page.title %}{{ page.title }}{% else %}{{ site.title }}{% endif %}">
  <meta property="og:description" content="{{ page.description | default: site.description | strip_html | truncatewords: 50 }}">
  <meta property="og:type" content="{% if page.layout == 'post' %}article{% else %}website{% endif %}">
  <meta property="og:url" content="{{ page.url | absolute_url }}">
  {% if page.image %}<meta property="og:image" content="{{ page.image | absolute_url }}">{% elsif site.logo %}<meta property="og:image" content="{{ site.logo | absolute_url }}">{% endif %}
  <meta property="og:locale" content="{{ site.lang | default: 'en' }}">
  <meta property="og:site_name" content="{{ site.title }}">

  <link rel="alternate" type="application/atom+xml" title="{{ site.title }}" href="{{ '/feed.xml' | relative_url }}">
  {% if site.author.webmention_io %}
  <link rel="webmention" href="https://webmention.io/{{ site.author.webmention_io }}/webmention">
  <link rel="pingback" href="https://webmention.io/{{ site.author.webmention_io }}/xmlrpc">
  {% endif %}
  <link rel="stylesheet" href="{{ '/assets/style.css' | relative_url }}">
</head>
<body class="h-card">

  <a class="skip-link" href="#main">{{ site.strings.skip_to_content }}</a>

  <header>
    <div class="header-row">
      <div class="site-branding">
        {% if site.logo %}<img class="u-logo" src="{{ site.logo | relative_url }}" alt="" width="48" height="48">{% endif %}
        <a href="{{ '/' | relative_url }}" class="site-title p-name u-url">{{ site.title }}</a>
      </div>
      <details class="nav-toggle">
        <summary aria-label="{{ site.strings.menu }}">&#9776; <span class="visually-hidden">{{ site.strings.menu }}</span></summary>
      </details>
    </div>
    {% if site.description %}
    <p class="site-description">{{ site.description }}</p>
    {% endif %}

    <nav aria-label="{{ site.strings.primary_nav }}">
      {% for item in site.data.navigation %}
        {% if item.children %}
        <div class="dropdown">
          <button aria-haspopup="true">{{ item.title }}</button>
          <ul role="menu">
            {% for child in item.children %}
            <li role="none"><a role="menuitem" href="{{ child.url | relative_url }}">{{ child.title }}</a></li>
            {% endfor %}
          </ul>
        </div>
        {% else %}
        {% assign item_url_slash = item.url | append: '/' %}
        <a href="{{ item.url | relative_url }}"{% if page.url == item.url or page.url == item_url_slash %} aria-current="page"{% endif %}>{{ item.title }}</a>
        {% endif %}
      {% endfor %}
    </nav>
  </header>

  <main id="main">
    {{ content }}
  </main>

  <footer>
    <p>&copy; {{ site.time | date: '%Y' }} {{ site.title }}</p>
    {% if site.author.bluesky %}
    <p><a rel="me" href="https://bsky.app/profile/{{ site.author.bluesky }}">@{{ site.author.bluesky }}</a></p>
    {% endif %}
  </footer>

</body>
</html>
